


ThreadLocal类
    线程隔离的工具，存储在ThreadLocal里面的对象，只在当前线程有效。

    SqlSession是线程不安全的对象，不能在多个线程里面共享使用，否则会出现数据库里面的数据混乱的问题。
    所以SqlSession绝对不能在多个线程里面共享。

    可以把SqlSession存在在ThreadLocal里面，这样每个线程都有自己的SqlSession，就不存在多个线程共享使用的问题。


    在MapperFactory里面，getMapper方法里面每次都openSession。
    修改：
        1.在getMapper方法里面判断当前线程是否有SqlSession，如果有则不open，而是直接使用。
            没有才open一个！

            此时需要有一个成员变量，类型为ThreadLocal的。

        2.原来只是负责openSession，并没有关闭。
            此时需要使用一个过滤器，在所有的请求处理完成以后，把当前线程的SqlSession关闭掉。
            MapperFactory里面有closeSession的方法。

            并且在过滤器的后处理里面，调用此关闭方法。
